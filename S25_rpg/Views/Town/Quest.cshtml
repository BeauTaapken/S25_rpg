@using S25_rpg.Models.Interfaces

@{
    ViewData["Title"] = "Quest";
}

<div class="font-size text-center pt-10">
    <div class="text-right">
        <button class="btn btn-primary">@Html.ActionLink("Back to Tavern", "Tavern", "Town", null, new { @class = "white-link font-size" })</button>
    </div>
    <h1>Quest</h1>
    <div class="float-left w-45 border-dark border rounded">
        <h2 class="text-center">
            Accepted quests
        </h2>
        @{
            foreach (IQuest quest in ViewBag.AcceptedQuests)
            {
                <hr />
                <div class="h-50px pt-1">
                    @quest.Name
                    <div class="float-right mr-2">
                        <i class="fas fa-info-circle pointer" onclick="openModalWithData('@quest.Name', '@quest.Description', '@quest.ClearRequirement', '@quest.Reward')"></i>
                        @* TODO Find a good way to check if the quest can be completed(also in the backend) *@
                        <button class="btn btn-dark">@Html.ActionLink("Complete", "CompleteQuest", "Town", new {quest.Id}, new { @class = "white-link font-size"})</button>
                    </div><br />
                </div>
            }
        }
    </div>
    <div class="float-right w-45 border-dark border rounded">
        <h2 class="text-center">
            Unaccepted quests
        </h2>
        @{
            foreach (IQuest quest in ViewBag.Quests)
            {
                if (quest.Repeatable && quest.Completed || quest.Completed == false)
                {
                    <hr />
                    <div class="h-50px pt-1">
                        @quest.Name
                        <div class="float-right mr-2">
                            <i class="fas fa-info-circle pointer" onclick="openModalWithData('@quest.Name', '@quest.Description', '@quest.ClearRequirement', '@quest.Reward')"></i>
                            <button class="btn btn-dark">@Html.ActionLink("Accept", "AcceptQuest", "Town", new {quest.Id}, new { @class = "white-link font-size" })</button>
                        </div><br />
                    </div>
                }
            }
        }
    </div>
</div>

<div id="questModal" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="questName">Modal title</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p id="questDescription">Modal body text goes here.</p>
                <p id="questRequirement">Modal body text goes here.</p>
                <p id="questReward">Modal body text goes here.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>